!function(e){e.fn.tableCheckbox=function(t){var n={config:e.extend({selectedRowClass:"warning",checkboxSelector:'td:first-of-type input[type="checkbox"],th:first-of-type input[type="checkbox"]',isChecked:function(e){return e.is(":checked")}},t),registry:{shiftKeyIsPressed:!1},helpers:{selection:window.getSelection?window.getSelection():document.selection?document.selection:null,removeTextSelection:function(){n.helpers.selection&&(n.helpers.selection.empty?n.helpers.selection.empty():n.helpers.selection.removeAllRanges())},hasSelection:function(){return!!n.helpers.selection&&n.helpers.selection.toString().length}}};return e(document).on("keydown.tsc keyup.tsc",function(e){n.registry.shiftKeyIsPressed=e.shiftKey}),this.each(function(){var t=e(this),c=t.find("thead tr "+n.config.checkboxSelector),i=t.find("tr "+n.config.checkboxSelector).not(c),o=[];c.on("change",function(e){i.prop("checked",n.config.isChecked(c)).trigger("change")}),i.each(function(){var t=e(this),c=t.parents("tr");t.on("change",function(e,i){n.helpers.removeTextSelection(),!i&&n.registry.shiftKeyIsPressed&&o.length&&($inbetween=o.index()<c.index()?c.prevUntil(o):c.nextUntil(o),$inbetween.find(n.config.checkboxSelector).prop("checked",n.config.isChecked(t)).trigger("change",[!0])),o=c,c.toggleClass(n.config.selectedRowClass,n.config.isChecked(t))}),c.on("click",function(i){n.helpers.hasSelection()||(e.data(c,"tc-timeout")&&window.clearTimeout(e.data(c,"tc-timeout")),e.data(c,"tc-timeout",window.setTimeout(function(){n.helpers.hasSelection()||e(i.target).is("a,input,button")||e(i.target).parents("a,input,button").length||t.prop("checked",!n.config.isChecked(t)).trigger("change")},50)))})})})}}(jQuery);