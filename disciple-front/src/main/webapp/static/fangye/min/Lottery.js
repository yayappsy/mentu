var Lottery=(function(){var G,T,U,M,K,V,N,E,P=null,A=[],B,I;function S(W){U=parseInt(W[0])||1;M=parseInt(W[1])||100;K=parseInt(W[2])||10;V=W[3]||function(){};if(parseInt(U)>=parseInt(M)){return}I=D(U,M);T.clearRect(0,0,N,E);F();J();G.addEventListener("click",L,false)}function R(){var W="0123456789abcdef",Y="",X=6;while(X--){Y+=W.charAt(Math.round(Math.random()*15))}return"#"+Y}function F(){var Y=U,X=(M-U)/10;T.shadowColor="rgba(10,10,10,0.8)";T.shadowOffsetX=3;T.shadowOffsetY=3;T.shadowBlur=30;for(var W=0;W<X;W++){for(var Z=0;Z<10;Z++){T.fillStyle=R();T.fillRect(Z*(50+3),W*(50+3),50,50);T.fillStyle="#ffffff";T.fillText(Y++,Z*(50+3)+18,W*(50+3)+27);if(M==W*10+Z+U){return}}}}function J(W){if(W){T.shadowColor="rgba(10,10,10,0.8)";T.shadowOffsetX=3;T.shadowOffsetY=3;T.shadowBlur=30;T.fillStyle="rgba(0,0,0,.3)";T.fillRect(0,0,N,E);W.forEach(function(Z,X){var Y=C(Z);T.fillStyle=R();T.beginPath();T.arc(Y.row*(50+3)+24,Y.col*(50+3)+24,30,0,Math.PI*2,true);T.fill()});T.fillStyle="#ffffff";W.forEach(function(Z,X){var Y=C(Z);T.fillText(Z,Y.row*(50+3)+18,Y.col*(50+3)+27)})}else{B=T.getImageData(N/2-100,E/2-100,200,200);T.shadowColor=undefined;T.shadowOffsetX=0;T.shadowOffsetY=0;T.shadowBlur=10;T.fillStyle="rgba(0,0,0,.6)";T.beginPath();T.arc(N/2,E/2,100,0,Math.PI*2,true);T.fill();T.shadowColor="rgba(255,255,255,0.8)";T.shadowOffsetX=5;T.shadowOffsetY=5;T.shadowBlur=20;T.beginPath();T.strokeStyle="#ffffff";T.moveTo(N/2-100+60,E/2-100+40);T.lineTo(N/2-100+160,E/2-100+100);T.lineTo(N/2-100+60,E/2-100+160);T.lineTo(N/2-100+60,E/2-100+40);T.stroke();T.closePath();T.fillStyle="rgba(255,255,255,.8)";T.fill();T.shadowColor=undefined;T.shadowOffsetX=0;T.shadowOffsetY=0;T.shadowBlur=0}}function L(W){if(N/2-100<W.clientX-G.offsetLeft&&W.clientX-G.offsetLeft<N/2+100&&E/2-100<W.clientY-G.offsetTop&&W.clientY-G.offsetTop<E/2+100){T.putImageData(B,N/2-100,E/2-100);B=null;H(function(){J(A);V(A)});G.removeEventListener("click",L,false)}}function D(W,X){switch(arguments.length){case 1:return parseInt(Math.random()*W+1);case 2:return parseInt(Math.random()*(X-W+1)+W);default:return 0}}function Q(X,Y){var W;switch("0123".charAt(Math.round(Math.random()*3))){case"0":W=I-10;break;case"1":W=I+1;break;case"2":W=I+10;break;case"3":W=I-1;break}console.log(W);if(W<X||W>I){return Q(X,Y)}else{return W}}function O(){var X=K,W=[];while(X--){var Y=D(U,M),Z=C(Y);T.fillStyle=R();T.fillRect(Z.x,Z.y,50,50);T.fillStyle="#ffffff";T.fillText(Y,Z.row*(50+3)+18,Z.col*(50+3)+27);W.push(Y)}A=W}function C(Y){var X=(Y-U)%10;var W=Math.floor((Y-U)/10);return{x:X*(50+3),y:W*(50+3),row:X,col:W}}function H(W){P=setInterval(O,50);setTimeout(function(){clearInterval(P);W(A.join(" "))},3000)}return function(){var W=Array.prototype.slice.call(arguments);G=typeof W[0]==="string"?document.getElementById(W[0]):W[0];if(typeof G=="object"){T=G.getContext("2d");N=G.width;E=G.height;W.shift();S(W)}}})();